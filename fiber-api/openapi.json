{
  "openapi": "3.1.0",
  "info": {
    "title": "Hixbe Fiber API",
    "description": "API for Hixbe Fiber customers and business clients.\n\n## Overview\n\nThe Hixbe Fiber API provides two distinct interfaces:\n\n- **Consumer API**: Simple, user-friendly endpoints for residential customers to check their network status, account details, usage statistics, and run speed tests.\n- **Business API**: Advanced endpoints for enterprise clients to manage IP assignments, monitor bandwidth usage, and automate network operations.\n\n## Authentication\n\nAll endpoints require Bearer token authentication. Include your JWT token in the Authorization header:\n\n```\nAuthorization: Bearer YOUR_JWT_TOKEN\n```\n\nTokens can be obtained from your Hixbe account dashboard.\n\n## Versioning\n\nAll requests must include the `Hixe-Version` header with the API version date (format: YYYY-MM-DD). Current version: `2026-01-01`\n\n## Rate Limiting\n\n- Consumer endpoints: 100 requests per minute\n- Business endpoints: 1000 requests per minute\n\nRate limit information is included in response headers:\n- `X-RateLimit-Limit`: Maximum requests allowed\n- `X-RateLimit-Remaining`: Requests remaining in current window\n- `X-RateLimit-Reset`: Unix timestamp when the limit resets",
    "version": "2026-01-01",
    "contact": {
      "name": "Hixbe API Support",
      "email": "support@hixbe.com",
      "url": "https://support.hixbe.com"
    },
    "license": {
      "name": "Proprietary",
      "url": "https://hixbe.com/terms"
    }
  },
  "servers": [
    {
      "url": "https://api.hixbe.com/fiber",
      "description": "Production API"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT token obtained from Hixbe account dashboard"
      }
    },
    "parameters": {
      "hixeVersionHeader": {
        "name": "Hixe-Version",
        "in": "header",
        "description": "API version in YYYY-MM-DD format. Current version: 2026-01-01",
        "required": true,
        "schema": {
          "type": "string",
          "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
          "example": "2026-01-01"
        }
      }
    },
    "schemas": {
      "ConsumerNetwork": {
        "type": "object",
        "description": "Network information for consumer account including IP addresses and service status",
        "properties": {
          "ip": {
            "type": "string",
            "description": "Assigned IPv4 address",
            "example": "203.0.113.42"
          },
          "ipv6": {
            "type": "string",
            "description": "Assigned IPv6 address (if available)",
            "example": "2001:db8::1",
            "nullable": true
          },
          "plan": {
            "type": "string",
            "description": "Current subscription plan name",
            "example": "Fiber 1000",
            "enum": ["Fiber 100", "Fiber 500", "Fiber 1000", "Fiber 2000"]
          },
          "status": {
            "type": "string",
            "description": "Current service status",
            "enum": ["active", "suspended", "pending"],
            "example": "active"
          },
          "connection_type": {
            "type": "string",
            "description": "Type of fiber connection",
            "enum": ["FTTH", "FTTB", "FTTC"],
            "example": "FTTH"
          },
          "max_speed_mbps": {
            "type": "integer",
            "description": "Maximum download speed in Mbps for current plan",
            "example": 1000
          }
        },
        "required": ["ip", "plan", "status"]
      },
      "ConsumerAccount": {
        "type": "object",
        "description": "Account information including billing and subscription details",
        "properties": {
          "account_id": {
            "type": "string",
            "description": "Unique account identifier",
            "example": "ACC-123456"
          },
          "name": {
            "type": "string",
            "description": "Account holder name",
            "example": "John Doe"
          },
          "plan": {
            "type": "string",
            "description": "Current subscription plan",
            "example": "Fiber 1000"
          },
          "valid_until": {
            "type": "string",
            "format": "date",
            "description": "Date until which the subscription is valid (ISO 8601 format)",
            "example": "2026-02-01"
          },
          "billing_status": {
            "type": "string",
            "description": "Current billing status",
            "enum": ["paid", "unpaid", "overdue"],
            "example": "paid"
          },
          "auto_renew": {
            "type": "boolean",
            "description": "Whether auto-renewal is enabled",
            "example": true
          },
          "next_billing_date": {
            "type": "string",
            "format": "date",
            "description": "Next billing date (ISO 8601 format)",
            "example": "2026-01-15"
          }
        },
        "required": ["plan", "valid_until", "billing_status"]
      },
      "ConsumerUsage": {
        "type": "object",
        "description": "Data usage statistics for consumer account",
        "properties": {
          "daily_gb": {
            "type": "number",
            "description": "Data used today in gigabytes",
            "example": 12.5,
            "minimum": 0
          },
          "monthly_gb": {
            "type": "number",
            "description": "Data used this billing cycle in gigabytes",
            "example": 387.2,
            "minimum": 0
          },
          "monthly_limit_gb": {
            "type": "number",
            "description": "Monthly data cap in gigabytes (null if unlimited)",
            "example": null,
            "nullable": true
          },
          "last_updated": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp of last usage update (ISO 8601 format)",
            "example": "2026-01-15T14:30:00Z"
          }
        },
        "required": ["daily_gb", "monthly_gb"]
      },
      "SpeedTestConfig": {
        "type": "object",
        "description": "Configuration for running speed tests against Hixbe servers",
        "properties": {
          "server": {
            "type": "string",
            "description": "Primary speed test server hostname",
            "example": "speedtest-ny.hixbe.com"
          },
          "latency_endpoint": {
            "type": "string",
            "description": "Endpoint for latency/ping tests",
            "example": "https://speedtest-ny.hixbe.com/latency"
          },
          "download_endpoint": {
            "type": "string",
            "description": "Endpoint for download speed tests",
            "example": "https://speedtest-ny.hixbe.com/download"
          },
          "upload_endpoint": {
            "type": "string",
            "description": "Endpoint for upload speed tests",
            "example": "https://speedtest-ny.hixbe.com/upload"
          },
          "recommended_duration_seconds": {
            "type": "integer",
            "description": "Recommended test duration for accurate results",
            "example": 10,
            "default": 10
          }
        },
        "required": ["server", "latency_endpoint", "download_endpoint", "upload_endpoint"]
      },
      "BusinessIPAssignment": {
        "type": "object",
        "description": "IP address assignment for business clients",
        "properties": {
          "ip": {
            "type": "string",
            "description": "Assigned IP address or CIDR block",
            "example": "198.51.100.0/24"
          },
          "status": {
            "type": "string",
            "description": "Assignment status",
            "enum": ["active", "reserved", "deprecated"],
            "example": "active"
          },
          "rdns": {
            "type": "string",
            "description": "Reverse DNS record for the IP",
            "example": "mail.example.com",
            "nullable": true
          },
          "assigned_date": {
            "type": "string",
            "format": "date",
            "description": "Date when IP was assigned",
            "example": "2025-06-15"
          },
          "type": {
            "type": "string",
            "description": "IP address type",
            "enum": ["ipv4", "ipv6"],
            "example": "ipv4"
          }
        },
        "required": ["ip", "status"]
      },
      "BandwidthUsage": {
        "type": "object",
        "description": "Bandwidth usage statistics for business clients",
        "properties": {
          "period": {
            "type": "string",
            "description": "Time period for the usage data",
            "enum": ["daily", "monthly"],
            "example": "monthly"
          },
          "in_gb": {
            "type": "number",
            "description": "Inbound bandwidth in gigabytes",
            "example": 1250.5,
            "minimum": 0
          },
          "out_gb": {
            "type": "number",
            "description": "Outbound bandwidth in gigabytes",
            "example": 2340.8,
            "minimum": 0
          },
          "total_gb": {
            "type": "number",
            "description": "Total bandwidth (in + out) in gigabytes",
            "example": 3591.3,
            "minimum": 0
          },
          "start_date": {
            "type": "string",
            "format": "date",
            "description": "Period start date",
            "example": "2026-01-01"
          },
          "end_date": {
            "type": "string",
            "format": "date",
            "description": "Period end date",
            "example": "2026-01-31"
          },
          "peak_usage_mbps": {
            "type": "number",
            "description": "Peak bandwidth usage in Mbps during period",
            "example": 850.5
          }
        },
        "required": ["period", "in_gb", "out_gb"]
      },
      "Error": {
        "type": "object",
        "description": "Standard error response",
        "properties": {
          "error": {
            "type": "object",
            "properties": {
              "code": {
                "type": "string",
                "description": "Error code for programmatic handling",
                "example": "invalid_request"
              },
              "message": {
                "type": "string",
                "description": "Human-readable error message",
                "example": "The Hixe-Version header is required"
              },
              "details": {
                "type": "object",
                "description": "Additional error details",
                "nullable": true
              }
            },
            "required": ["code", "message"]
          }
        },
        "required": ["error"]
      }
    },
    "responses": {
      "UnauthorizedError": {
        "description": "Authentication failed - invalid or missing token",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            },
            "example": {
              "error": {
                "code": "unauthorized",
                "message": "Invalid or expired authentication token"
              }
            }
          }
        }
      },
      "ForbiddenError": {
        "description": "Access denied - token valid but lacks required permissions",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            },
            "example": {
              "error": {
                "code": "forbidden",
                "message": "Your account does not have access to this resource"
              }
            }
          }
        }
      },
      "NotFoundError": {
        "description": "Resource not found",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            },
            "example": {
              "error": {
                "code": "not_found",
                "message": "The requested resource was not found"
              }
            }
          }
        }
      },
      "RateLimitError": {
        "description": "Rate limit exceeded",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            },
            "example": {
              "error": {
                "code": "rate_limit_exceeded",
                "message": "Too many requests. Please retry after 60 seconds"
              }
            }
          }
        },
        "headers": {
          "X-RateLimit-Limit": {
            "schema": {
              "type": "integer"
            },
            "description": "Maximum requests allowed per window"
          },
          "X-RateLimit-Remaining": {
            "schema": {
              "type": "integer"
            },
            "description": "Requests remaining in current window"
          },
          "X-RateLimit-Reset": {
            "schema": {
              "type": "integer"
            },
            "description": "Unix timestamp when rate limit resets"
          },
          "Retry-After": {
            "schema": {
              "type": "integer"
            },
            "description": "Seconds to wait before retrying"
          }
        }
      },
      "ValidationError": {
        "description": "Request validation failed",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            },
            "example": {
              "error": {
                "code": "validation_error",
                "message": "Invalid request parameters",
                "details": {
                  "period": "Must be either 'daily' or 'monthly'"
                }
              }
            }
          }
        }
      }
    }
  },
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "tags": [
    {
      "name": "Consumer",
      "description": "Endpoints for residential customers"
    },
    {
      "name": "Business",
      "description": "Endpoints for enterprise clients"
    }
  ],
  "paths": {
    "/consumer/network": {
      "get": {
        "tags": ["Consumer"],
        "summary": "Get consumer network info",
        "description": "Returns current network configuration including IP addresses, plan details, and service status for the authenticated consumer account.\n\n**Use Cases:**\n- Display current IP address in customer portal\n- Check service status before troubleshooting\n- Verify plan details and connection type",
        "operationId": "getConsumerNetwork",
        "parameters": [
          {
            "$ref": "#/components/parameters/hixeVersionHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved network information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConsumerNetwork"
                },
                "example": {
                  "ip": "203.0.113.42",
                  "ipv6": "2001:db8::1",
                  "plan": "Fiber 1000",
                  "status": "active",
                  "connection_type": "FTTH",
                  "max_speed_mbps": 1000
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "429": {
            "$ref": "#/components/responses/RateLimitError"
          }
        }
      }
    },
    "/consumer/account": {
      "get": {
        "tags": ["Consumer"],
        "summary": "Get consumer account info",
        "description": "Returns account details including billing status, subscription validity, and auto-renewal settings.\n\n**Use Cases:**\n- Check billing status and payment due dates\n- Verify subscription expiration\n- Display account summary in customer portal",
        "operationId": "getConsumerAccount",
        "parameters": [
          {
            "$ref": "#/components/parameters/hixeVersionHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved account information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConsumerAccount"
                },
                "example": {
                  "account_id": "ACC-123456",
                  "name": "John Doe",
                  "plan": "Fiber 1000",
                  "valid_until": "2026-02-01",
                  "billing_status": "paid",
                  "auto_renew": true,
                  "next_billing_date": "2026-01-15"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "429": {
            "$ref": "#/components/responses/RateLimitError"
          }
        }
      }
    },
    "/consumer/usage": {
      "get": {
        "tags": ["Consumer"],
        "summary": "Get consumer usage stats",
        "description": "Returns data usage statistics including daily and monthly consumption. Usage data is updated approximately every 15 minutes.\n\n**Use Cases:**\n- Monitor data consumption\n- Display usage graphs in customer portal\n- Check against data caps (if applicable)",
        "operationId": "getConsumerUsage",
        "parameters": [
          {
            "$ref": "#/components/parameters/hixeVersionHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved usage statistics",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConsumerUsage"
                },
                "example": {
                  "daily_gb": 12.5,
                  "monthly_gb": 387.2,
                  "monthly_limit_gb": null,
                  "last_updated": "2026-01-15T14:30:00Z"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "429": {
            "$ref": "#/components/responses/RateLimitError"
          }
        }
      }
    },
    "/consumer/speedtest/config": {
      "get": {
        "tags": ["Consumer"],
        "summary": "Get speed test configuration",
        "description": "Returns configuration for running speed tests against Hixbe's nearest server. The server selection is automatic based on the customer's location.\n\n**Use Cases:**\n- Implement custom speed test tools\n- Verify connection performance\n- Troubleshoot bandwidth issues\n\n**Implementation Notes:**\n- Use the latency endpoint for ping tests (typically 10 requests)\n- Download/upload tests should run for at least 10 seconds for accuracy\n- Tests should be performed during off-peak hours for best results",
        "operationId": "getSpeedTestConfig",
        "parameters": [
          {
            "$ref": "#/components/parameters/hixeVersionHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved speed test configuration",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SpeedTestConfig"
                },
                "example": {
                  "server": "speedtest-ny.hixbe.com",
                  "latency_endpoint": "https://speedtest-ny.hixbe.com/latency",
                  "download_endpoint": "https://speedtest-ny.hixbe.com/download",
                  "upload_endpoint": "https://speedtest-ny.hixbe.com/upload",
                  "recommended_duration_seconds": 10
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "429": {
            "$ref": "#/components/responses/RateLimitError"
          }
        }
      }
    },
    "/business/ip/assignments": {
      "get": {
        "tags": ["Business"],
        "summary": "List all business IP assignments",
        "description": "Returns all IP addresses and ranges assigned to the authenticated business account, including their status and reverse DNS configuration.\n\n**Use Cases:**\n- Inventory management of IP assets\n- Audit IP allocation\n- Configure reverse DNS records\n- Network planning and documentation",
        "operationId": "listBusinessIPAssignments",
        "parameters": [
          {
            "$ref": "#/components/parameters/hixeVersionHeader"
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved IP assignments",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/BusinessIPAssignment"
                  }
                },
                "example": [
                  {
                    "ip": "198.51.100.0/24",
                    "status": "active",
                    "rdns": "mail.example.com",
                    "assigned_date": "2025-06-15",
                    "type": "ipv4"
                  },
                  {
                    "ip": "2001:db8::/48",
                    "status": "active",
                    "rdns": null,
                    "assigned_date": "2025-06-15",
                    "type": "ipv6"
                  }
                ]
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "429": {
            "$ref": "#/components/responses/RateLimitError"
          }
        }
      }
    },
    "/business/usage/bandwidth": {
      "get": {
        "tags": ["Business"],
        "summary": "Get business bandwidth usage",
        "description": "Returns bandwidth usage statistics for the specified time period, including inbound, outbound, and peak usage metrics.\n\n**Use Cases:**\n- Monitor bandwidth consumption\n- Capacity planning\n- Billing validation\n- Performance analysis\n- Generate usage reports\n\n**Data Accuracy:**\n- Daily data: Updated every hour\n- Monthly data: Aggregated from daily statistics\n- Peak usage tracked at 5-minute intervals",
        "operationId": "getBusinessBandwidthUsage",
        "parameters": [
          {
            "$ref": "#/components/parameters/hixeVersionHeader"
          },
          {
            "name": "period",
            "in": "query",
            "required": true,
            "description": "Time period for bandwidth usage. Use 'daily' for current day statistics or 'monthly' for current billing cycle.",
            "schema": {
              "type": "string",
              "enum": ["daily", "monthly"]
            },
            "example": "monthly"
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved bandwidth usage",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BandwidthUsage"
                },
                "examples": {
                  "monthly": {
                    "summary": "Monthly bandwidth usage",
                    "value": {
                      "period": "monthly",
                      "in_gb": 1250.5,
                      "out_gb": 2340.8,
                      "total_gb": 3591.3,
                      "start_date": "2026-01-01",
                      "end_date": "2026-01-31",
                      "peak_usage_mbps": 850.5
                    }
                  },
                  "daily": {
                    "summary": "Daily bandwidth usage",
                    "value": {
                      "period": "daily",
                      "in_gb": 45.2,
                      "out_gb": 78.3,
                      "total_gb": 123.5,
                      "start_date": "2026-01-15",
                      "end_date": "2026-01-15",
                      "peak_usage_mbps": 650.2
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "429": {
            "$ref": "#/components/responses/RateLimitError"
          }
        }
      }
    }
  }
}