{
  "openapi": "3.0.0",
  "info": {
    "title": "Hixbe SMS Gateway API",
    "version": "2026-01-01",
    "description": "A modern, developer-friendly SMS Gateway API supporting transactional, OTP, promotional and bulk messaging.",
    "contact": {
      "name": "Hixbe Developer Support",
      "url": "https://developer.hixbe.com",
      "email": "support@hixbe.com"
    },
    "termsOfService": "https://hixbe.com/terms",
    "license": {
      "name": "Commercial",
      "url": "https://hixbe.com/license"
    }
  },
  "servers": [
    {
      "url": "https://api.hixbe.com/sms",
      "description": "Production Server"
    }
  ],
  "tags": [
    { "name": "Messages", "description": "Send and track SMS messages" },
    { "name": "Bulk", "description": "CSV and list-based bulk sending" },
    { "name": "Senders", "description": "Sender IDs and registration" },
    { "name": "Templates", "description": "Message templates and variables" },
    { "name": "Reports", "description": "Delivery and usage reports" },
    { "name": "Account", "description": "Balance, usage and profile" },
    { "name": "Webhooks", "description": "Delivery report callbacks" }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "APIKEY",
        "description": "Authorization: Bearer sk_live_xxxxx"
      }
    },
    "parameters": {
      "Hixbe-Version": {
        "name": "Hixbe-Version",
        "in": "header",
        "description": "API version header. Use '2026-01-01' for the latest version.",
        "required": true,
        "schema": { "type": "string", "default": "2026-01-01" }
      }
    },
    "schemas": {
      "Error": {
        "type": "object",
        "properties": {
          "error": {
            "type": "object",
            "properties": {
              "type": { "type": "string" },
              "code": { "type": "string" },
              "message": { "type": "string" },
              "param": { "type": "string", "nullable": true },
              "request_id": { "type": "string" }
            },
            "required": ["type", "code", "message"]
          }
        }
      },
      "Message": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "example": "msg_123" },
          "to": { "type": "string", "example": "8801XXXXXXXXX" },
          "from": { "type": "string", "example": "DXSMS" },
          "body": { "type": "string", "example": "Your OTP is 391202" },
          "status": { "type": "string", "enum": ["queued", "sent", "delivered", "failed"] },
          "scheduled_at": { "type": "string", "format": "date-time", "nullable": true },
          "created_at": { "type": "string", "format": "date-time" }
        }
      },
      "Balance": {
        "type": "object",
        "properties": {
          "currency": { "type": "string", "example": "BDT" },
          "balance": { "type": "number", "example": 524.25 }
        }
      },
      "Sender": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "example": "snd_001" },
          "name": { "type": "string", "example": "DXSMS" },
          "status": { "type": "string", "enum": ["pending", "approved", "rejected"] }
        }
      },
      "Template": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "example": "tpl_001" },
          "name": { "type": "string" },
          "content": { "type": "string", "example": "Your OTP is {{code}}" }
        }
      },
      "Webhook": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "example": "wh_001" },
          "url": { "type": "string" },
          "events": { "type": "array", "items": { "type": "string" } },
          "enabled": { "type": "boolean" }
        }
      }
    },
    "responses": {
      "Unauthorized": {
        "description": "Authentication failed",
        "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } }
      },
      "GenericError": {
        "description": "Standard error response",
        "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } }
      }
    }
  },
  "security": [{ "bearerAuth": [] }],
  "paths": {
    "/messages": {
      "post": {
        "tags": ["Messages"],
        "summary": "Send SMS",
        "operationId": "sendSMS",
        "parameters": [
          { "$ref": "#/components/parameters/Hixbe-Version" }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "to": { "type": "string" },
                  "from": { "type": "string" },
                  "message": { "type": "string" },
                  "schedule_at": { "type": "string", "format": "date-time", "nullable": true },
                  "route": { "type": "string", "enum": ["otp", "transactional", "promotional"], "default": "transactional" }
                },
                "required": ["to", "message"]
              },
              "example": {
                "to": "8801XXXXXXXXX",
                "from": "DXSMS",
                "message": "Welcome to DXSMS",
                "route": "transactional"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Message accepted",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Message" }
              }
            }
          },
          "400": { "$ref": "#/components/schemas/Error" },
          "401": { "$ref": "#/components/responses/Unauthorized" }
        }
      }
    },
    "/bulk": {
      "post": {
        "tags": ["Bulk"],
        "operationId": "sendBulkSMS",
        "parameters": [
          { "$ref": "#/components/parameters/Hixbe-Version" }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "recipients": {
                    "type": "array",
                    "items": { "type": "string" }
                  },
                  "message": { "type": "string" },
                  "from": { "type": "string" }
                }
              },
              "example": {
                "recipients": ["8801XXXXXXXXX", "8801YYYYYYYYY"],
                "message": "Big Sale Today!",
                "from": "DXSMS"
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Bulk accepted",
            "content": {
              "application/json": {
                "schema": { "type": "object", "example": { "job_id": "job_001", "queued": 2 } }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" }
        }
      }
    },
    "/senders": {
      "get": {
        "tags": ["Senders"],
        "operationId": "listSenders",
        "parameters": [
          { "$ref": "#/components/parameters/Hixbe-Version" }
        ],
        "responses": {
          "200": {
            "description": "List of sender IDs",
            "content": {
              "application/json": {
                "schema": { "type": "array", "items": { "$ref": "#/components/schemas/Sender" } }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" }
        }
      },
      "post": {
        "tags": ["Senders"],
        "operationId": "requestSenderID",
        "parameters": [
          { "$ref": "#/components/parameters/Hixbe-Version" }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "documents": { "type": "array", "items": { "type": "string" } }
                },
                "required": ["name"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Sender requested",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Sender" }
              }
            }
          },
          "400": { "$ref": "#/components/schemas/Error" },
          "401": { "$ref": "#/components/responses/Unauthorized" }
        }
      }
    },
    "/templates": {
      "get": {
        "tags": ["Templates"],
        "operationId": "listTemplates",
        "parameters": [
          { "$ref": "#/components/parameters/Hixbe-Version" }
        ],
        "responses": {
          "200": {
            "description": "List of message templates",
            "content": {
              "application/json": {
                "schema": { "type": "array", "items": { "$ref": "#/components/schemas/Template" } }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" }
        }
      },
      "post": {
        "tags": ["Templates"],
        "operationId": "createTemplate",
        "parameters": [
          { "$ref": "#/components/parameters/Hixbe-Version" }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "content": { "type": "string" }
                },
                "required": ["name", "content"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Template created successfully",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Template" }
              }
            }
          },
          "400": { "$ref": "#/components/schemas/Error" },
          "401": { "$ref": "#/components/responses/Unauthorized" }
        }
      }
    },
    "/account/balance": {
      "get": {
        "tags": ["Account"],
        "operationId": "getBalance",
        "parameters": [
          { "$ref": "#/components/parameters/Hixbe-Version" }
        ],
        "responses": {
          "200": {
            "description": "Account balance information",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Balance" }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" }
        }
      }
    },
    "/webhooks": {
      "get": {
        "tags": ["Webhooks"],
        "operationId": "listWebhooks",
        "parameters": [
          { "$ref": "#/components/parameters/Hixbe-Version" }
        ],
        "responses": {
          "200": {
            "description": "List of registered webhooks",
            "content": {
              "application/json": {
                "schema": { "type": "array", "items": { "$ref": "#/components/schemas/Webhook" } }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" }
        }
      },
      "post": {
        "tags": ["Webhooks"],
        "operationId": "registerWebhook",
        "parameters": [
          { "$ref": "#/components/parameters/Hixbe-Version" }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "url": { "type": "string" },
                  "events": { "type": "array", "items": { "type": "string" } }
                },
                "required": ["url", "events"]
              },
              "example": {
                "url": "https://yourapp.com/sms-webhooks",
                "events": ["message.delivered", "message.failed"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Webhook registered successfully",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Webhook" }
              }
            }
          },
          "400": { "$ref": "#/components/schemas/Error" },
          "401": { "$ref": "#/components/responses/Unauthorized" }
        }
      }
    }
  }
}
